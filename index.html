<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>reactProject</title>
    <script src="http://libs.baidu.com/jquery/1.9.0/jquery.js"></script>
    <!-- <script src="http://localhost:82/Scripts/ChartScript/script/jquery-1.8.2.min.js"></script> -->
    <link rel="stylesheet" href="static/css/reset.main.css">
    <script src="static/js/sortable.js"></script>
    <style>
        body,
        html {
            width: 100%;
            height: 100%;
            background: #fff;
        }
        
        .tagBox .tagViews .tagItem.border::before {
            width: 0px !important;
            border-right: 1px solid #777777 !important;
        }
        
        .tagBox .tagViews .tagItem.border:last-child:before {
            width: 0px;
            border-right: 1px solid #777777 !important;
        }
    </style>
</head>

<body>
    <button class="prev">上一页</button>
    <button class="next">下一页</button>
    <button class="addTag" data-url="https://www.baidu.com?Arguments=213">百度</button>
    <button class="addTag" data-url="https://www.hao123.com">hao123</button>
    <button class="addTag" data-url="https://blog.csdn.net/lyh6665/article/details/107929324?Arguments=csdn">csdn</button>
    <button class="addTag" data-url="https://gitee.com?Arguments=gitee">gitee</button>
    <button class="addTag" data-url="http://www.people.com.cn/">人民网</button>
    <button class="addTag" data-url="http://www.dangdang.com/">当当</button>
    <button class="addTag" data-url="https://www.weibo.com/">微博网</button>
    <button class="addTag" data-url="https://www.tencent.com/zh-cn">腾讯网</button>
    <button class="reload">刷新</button>
    <div>
        <div class="prev" style="display:inline-block;height:30px;line-height:30px;width:35px;text-align: center;float:left;cursor:pointer">《</div>
        <div class="Nav" style="width:calc(100% - 115px);margin:auto;display:inline-block;float: left;"></div>
        <div class="next" style="display:inline-block;height:30px;line-height:30px;width: 35px;text-align:center;float: left;cursor:pointer">》</div>
        <div class="reload" style="display:inline-block;height:30px;line-height:30px;width: 35px;text-align:center;float: left;fongt-size:14px;cursor:pointer">刷新</div>
        <div style="clear: both;"></div>
    </div>
    <!-- <iframe src="https://www.baidu.com" style="display:none;height:1px;"></iframe> -->
    <div class="frameBox" style="width:100%;height:calc(100% - 60px);">

    </div>
    <script>
        var Wzid = Math.random().toString(16).slice(2);

        $(function() {
            //tagList 为默认加载的标签页
            tagView = new TagView({
                cache: {
                    table: "tableData" //缓存表名
                },
                el: ".Nav", //标签页承载的容器
                frameEl: ".frameBox", // iframe 承载的容器
                height: 30, // tagView的高度
                border: 15,
                params: {
                    "Arguments": function(a) {
                        console.log(a, "传入的参数");
                        return Wzid
                            // return Math.random().toString(16).slice(2)
                    }
                }, //"url需要替换的参数"
                tagList: [{
                    path: "https://www.baidu.com?Arguments=" + Wzid,
                    title: "首页",
                    active: true, //是否选中
                    isAffix: true, //是否固定
                    preload: false //是否预加载自行实现预加载方式
                }],
                plugins: [
                    function() {
                        var db = arguments[0];

                        function sortData(oldIndex, newIndex) {
                            console.log("拖拽完成")
                            var data = db.store;
                            data.tagList.splice(newIndex, 0, data.tagList.splice(oldIndex, 1)[0]);
                            data.activeIndex = $(".tagItem.active").index();
                            db.dbUtil.setData(JSON.stringify(data))
                        }
                        //获取对象
                        var el = $(".tagViews")[0];
                        //设置配置
                        var ops = {
                            animation: 300,
                            direction: 'vertical',
                            // delay: 500,
                            //拖动结束
                            onEnd: function(evt) {
                                sortData(evt.oldIndex, evt.newIndex)
                                    //获取拖动后的排序
                                    // var arr = sortable.toArray();
                                    // alert(JSON.stringify(arr));
                            }
                        };
                        //初始化
                        var sortable = Sortable.create(el, ops);
                    }

                ]
            })
            $(".next").on('click', function() {
                tagView.next(); //下一页
            })
            $(".prev").on('click', function() {
                tagView.prev(); // 上一页
            })
            $(".addTag").click(function() {
                tagView.addTagView($(this).text().trim(), $(this).data("url").trim()) //添加标签 参数1为title 参数2 为url 地址
            })
            $(".reload").click(function() {
                tagView.refresh(); //刷新当前选中的标签页
            })



        })
    </script>
</body>

</html>